{"./":{"url":"./","title":"Introduction","keywords":"","body":"文档建设中 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/联系我们.html":{"url":"docs/联系我们.html","title":"联系我们","keywords":"","body":"联系我们 Gmail：contact@bankofchain.io Telegram 中文：https://t.me/bankofchain Discord：https://discord.gg/78JBhDg5xr Twitter：https://twitter.com/bankofchain_dao var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/BOC介绍.html":{"url":"docs/BOC介绍.html","title":"BOC介绍","keywords":"","body":"BOC介绍 BOC是帮助普通投资者获取链上“无风险”保本理财的一款去中心化金融协议。 BOC平台连接加密生态系统内诸多协议，例如AMM、借贷协议、收益聚合器等（参见Dashboard详细信息）。通过接入高质量协议策略，BOC可以比其他美元托管管理基金高300~500个基点，这是BOC将吸引数亿美元的基础。 对于加密行业的新人来说，这是一个进入数字资产投资回报生态系统的最佳渠道。作为一键复合理财平台，BOC将为行业带来新的革命。 收益来源 为DEX提供做市资金收取的交易手续费 为超额抵押借贷提供借贷资金收取的利息 在以上过程中获得的协议管理代币补贴 资金分配规则 优先分配给高收益的资金池 单个资金池的投入资金，不能超过总投资资产的20% 单个资金池的投入资金，不能超过其现有锁仓量的50% 同协议多个资金池的投入资金，不能超过总投资资产的30% 定期进行收益评估，在调仓收益大于调仓成本时，对资金进行优化配置 为什么要开发BOC 现有的DeFi协议存在如下问题： 在去中心化交易所里做市，存在无偿损失。在2021年，UniswapV3做市收入约2亿美元做市收益，这些资金池遭受了2.6亿美元的无常损失，导致6000万美元的净损失总额。 部分收益聚合器存在循环依赖的问题。 部分协议投资门槛高。部分收益聚合器产品存在众多机枪池，用户需要较高的知识储备才能选择投资哪些底层协议。同时，众多DeFi产品需要投资多种不同币种，需要用户自行兑换成产品所需币种。 投资过程复杂。用户在投资再平衡过程中，需要实施取款、币种兑换和投资等复杂操作。 为何BOC与众不同 BOC作为开放式平台，通过连接加密生态众多协议实现分散投资，创建了长期的稳定的收益，避免了大部分风险。竞争力体现在 易用 仅存取两项操作，无需进行收割、兑换、调仓等复杂操作并支付费用 收益自动复投，资金随存随取 历史及动态收益直观可见 安全 合格稳定币已发行规模均超过10亿美元。 合格Block Chain锁仓超过50亿美元。 BOC通过第三方审计。 未使用第三方跨链桥 报价基于ChainLink 风控 稳定币脱锚风险：不使用算法稳定币，部分抵押稳定币，长尾资产抵押生成稳定币 无偿损失的风险：做市限于稳定币资产交易对 连锁系统性风险：排除嵌套代币和乐高协议 长尾风险：不通过提供风险服务获取回报，如保险、期权 杠杆风险：未使用杠杆放大风险与回报 智能 定期评估各资金池收益变化，权衡调仓成本与收益 通过聚合器，寻找兑换最佳路径 进行外汇收益套利，并根据汇率和收益波动自动增减杠杆 设置复杂做市及借贷策略参数 综上所述，BOC与市场上的类似产品相比，它在易用性、安全性、风控能力和智能投资方面，将带来行业革命和新市场增长。 竞品名称 BOC Yearn OUSD Aladdin DAO enzyme Harvest beefy alpha yield app 分类 DeFi银行 收益聚合器 算法稳定币 收益聚合器 链上资产管理 收益聚合器 收益聚合器 收益聚合器 DeFi银行 竞品介绍 BOC是帮助普通投资者获取链上“无风险”保本理财的一款去中心化金融协议。 Yearn Finance是区块链上的收益聚合器，由YFI持有人治理。 Origin Dollar（OUSD）是在Ethereum上推出的稳定币。 AladdinDAO协议通过群体智慧优化DeFi资产分配。 Enzyme可以快速高效自定义构建投资策略。 Harvest Finance是Ethereum、BNB Chain和Polygon上的收益聚合平台，使用户的资产在DeFi生态系统中获得最大收益。 Beefy Finance是多链收益聚合器，使用户的资产在DeFi生态系统中获得最大收益。 Alpha Finance Lab是一个跨链DeFi产品生态系统。Alpha Homora是第一款产品，是一种杠杆挖矿协议。 Yield App 是一个链接传统金融和去中心金融的桥梁。 支持链 ETH、BNB Chain、Polygon ETH Fantom ETH ETH ETH ETH、BNB Chain、Polygon BNB Chain、Arbitrum、Fantom等 ETH、BNB Chain、Avalanche ETH BNB Chain 锁仓量 3.1万 30.5亿 1.5582亿 278万 1.6798亿 2.2225亿 9.215亿 8.278亿 5.1271亿 治理代币 暂无 YFI OGN ALD MLN FARM BIFI ALPHA YLD 是否需要KYC认证 否 否 否 否 否 否 否 否 是 是否开源 是 是 是 是 是 是 是 是 否 投资最小额度 无 无 无 无 无 无 无 无 100 USD 仅支持稳定币 是 否 是 否 否 否 否 否 否 稳定币实际回报 5.46% 8.97% 3.63% - 5.42% 4.41% 1.20% 7-11% 池子数量 1个 多个 1个 多个 多个 多个 多个 多个 多个 池子支持多策略 是 是 是 否 是 是 否 否 未知 支持自动资金调配 是 否，需要设置配额 否 否 否，基金经理调配 否，需要设置配额 否 否 未知 池子投资中会发生兑换 是 否 否 否 是 否 否 否 未知 策略挑选方式 暂时是项目方严选 社区投选 暂时是项目方严选 社区投选 基金经理严选 社区投选 社区投选 社区投选 项目方严选 考虑资金分散 是 否 否 否 否 否 否 否 未知 使用聚合兑换 是 否 否 否 是 否 否 否 未知 支持杠杆借贷投资 暂无 否，已剥离 否 否 否 否 否 是 否 支持随时提取 是 是 是 是 是 是 是 是 是 费用收取 收益提成 收益提成 管理费 收益提成 提取费 收益提成 收益提成 入场费 管理费 收益提成 收益提成 管理费 收益提成 收益提成 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/协议模块.html":{"url":"docs/协议模块.html","title":"协议模块","keywords":"","body":"协议模块 区块链选择 BOC选择兼容EVM的区块链，目前已经对接Ethereum、BNB Chain和Polygon链。 Ethereum 以太坊（Ethereum）是一个去中心化的开源的有智能合约功能的公共区块链平台。以太坊以太币是以太坊的原生加密货币。截止2021 年12月，以太币是市值第二高的加密货币，仅次于比特币。以太坊是使用最多的区块链。 以太坊的概念首次在2013至2014年间由程序员维塔利克·布特林受比特币启发后提出，大意为“下一代加密货币与去中心化应用平台”，在2014年通过ICO众筹得以开始发展。 以太坊亦被称为“第二代的区块链平台”，仅次于比特币。 BNB Chain 币安智能链是一条以太坊虚拟机兼容，与币安链并行的区块链，是加密资产行业顶尖项目的测试和前沿探索。通过引入权益权威证明（PoSA）共识机制，BNB Chain创建了验证一个允许节点、代币持有者、开发者和用户都能够从区块链中获益的生态系统，享受更高的性能和更充裕的创新空间。 2022年2月15日，加密货币交易所币安发布消息，原币安智能链将更名为BNB Chain。BNB是币安交易所的平台币，以及币安智能链的生态代币。 Polygon Polygon是一种用于构建和互连与以太坊兼容的区块链网络的协议。 该项目于2017年在印度启动，最初的名称是Matic Network。 2021年2月，项目名称更名为Polygon。Polygon项目的加密货币名称为MATIC。MATIC代币是市值排名前20的加密货币之一，并在主要交易所进行交易。 稳定币选择 为避免数字货币价格大幅度波动产生的心理恐惧，并引发做市资金的无偿损失，BOC协议只针对稳定币资产，且仅限于有由法币提供足额抵押或由蓝筹数字资产提供超额抵押生成的稳定币。稳定币需要满足以下条件： 通过审计 具有保险 为减少预言机攻击向量， 稳定币的报价必须基于ChainLink而不是协议本身。 规模大于10亿美元 目前挑选出的策略稳定币种有：DAI、USDC、USDT、BUSD、USDP、TUSD、LUSD。 DAI DAI是一种稳定币加密货币，旨在通过以太坊区块链上的智能合约自动化系统将其价值保持在尽可能接近一美元的水平。 https://makerdao.com/en/ USDC USD Coin（USDC）是与美元挂钩的数字稳定币，可在以太坊，Stellar，Algorand，Hedera Hashgraph和Solana区块链上运行。截至2022年1月，流通中的USDC为452亿美元。 https://www.centre.io/usdc USDT 泰达币，又称USDT，是由Tether Limited发行的有争议的加密货币，而Tether Limited由Bitfinex的所有者控制。USDT为一种稳定币。此币于2014年发行，以区块链为基础的平台，透过数位方式促进法定货币的使用。 https://tether.to/en/ BUSD Binance USD（BUSD）是Binance和Paxos合作推出的新的稳定币，它以1:1的锚定美元。 https://www.binance.com/en/busd USDP Pax Dollar（USDP）是一种法定抵押的稳定币，它以1:1的锚定美元。 https://paxos.com/usdp/ TUSD TrueUSD（TUSD）是由Trusttoken发行的一种与美元挂钩的稳定币。 https://www.trusttoken.com/ LUSD LUSD是由Liquity协议发行的一种与美元挂钩的稳定币。 https://www.liquity.org/ 协议策略选择 当选定稳定币后，就能挑选只使用到这些稳定币的策略，策略需要满足以下条件： 无提取费 无入场费 无锁定期（部分策略存在锁定期，若干时间内无法取回资金） 无投资限额（部分策略对资金有限额） 为避免代码漏洞造成的损失，所有的协议均经过审计。 为避免嵌套代币、乐高组合产生的连锁性系统风险，接入的聚合理财协议，需要有长期的安全运营记录，并得到社区投票许可。 为避免市场波动导致损失，暂不接入通过提供风险服务获取资金回报的协议。 为避免市场波动导致损失，暂不通过杠杆放大资金回报。 该协议第一批将接入锁仓超过50亿美元的Ethereum、Polygon、BNB等3个智能合约平台。鉴于跨链技术尚不成熟，现阶段由用户手动使用官方跨链桥进行资产转换。 首批接入的DEX和借贷协议均为各区块链上的首选一线协议，并有良好的安全运营记录。 协议提供资金链内择优分配服务，该分配兼具回报最大化及资金风险分散两项原则。 目前挑选出的协议主要有： Ethereum上有Convex、DODO、SushiSwap、Balancer等 BNB Chain上有dForce、Synapse、Venus、DODO、Belt、Pancakeswap、Alpaca等 Polygon上有DODO、Synapse、Quickswap、Balancer、Aave、Curve、SushiSwap等 Aave Aave是一个开源的去中心化借贷协议，为用户提供存款和借贷服务。借贷双方用户的存款利率与贷款利率是根据平台借款量和存款量通过算法来计算得到的，并且平台采用Chainlink的预言机来保证抵押物价格的公平性。根据DeFi Pulse的资料，截止2022年3月30日，Aave的总资金锁仓量约为117.9亿美元，DeFi应用锁仓量排名第2名。 Curve Curve是部署在以太坊上的去中心化交易所。Curve通过自动化做市商协议，专为以低手续费和滑点进行稳定币之间的交易而设计。它是一个去中心化的流动性聚合器，任何人都可以将自己的资产添加到流动性资金池中，赚取做市收益。根据DeFi Pulse的资料，截止2022年3月30日，Curve的总资金锁仓量约为107.9亿美元，DeFi应用锁仓量排名第3名。 Convex Convex是以太坊上一个专门致力于简化Curve使用流程的【CRV 质押和流动性挖矿一站式平台】。 作为以太坊链上的收益聚合器，Convex旨在借助CVX代币，通过简单易用的界面，简化Curve和CRV锁定、质押的过程，并提高CRV持币者、流动性提供者的报酬，以此促进CRV生态系统发展。根据DeFi Pulse的资料，截止2022年3月30日，Convex的总资金锁仓量约为101亿美元，DeFi应用锁仓量排名第4名。 Uniswap Uniswap是部署在以太坊上的去中心化交易所。Uniswap协议通过使用智能合约促进以太坊区块链上的加密货币令牌之间的自动化交易。截至2020年10月，按每日交易量计算，Uniswap估计是最大的分散交易所和第四大加密货币交易所。根据DeFi Pulse的资料，截止2022年3月30日，Uniswap的总资金锁仓量约为70.4亿美元，DeFi应用锁仓量排名第6名。 Balancer Balancer是部署在以太坊上的去中心化交易所。Balancer使用自动造市商达成去中心化交易的功能，交易使用者可以选择交易对交易并支付交易手续费，而流动性提供者可获得手续费分润。根据DeFi Pulse的资料，截止2022年3月30日，Balancer的总资金锁仓量约为21.9亿美元，DeFi应用锁仓量排名第6名。 SushiSwap SushiSwap最初是Uniswap的分叉，以Uniswap的代码为基础构建而成，同时引入了一些关键差异。其中最大的差异是奖励以SUSHI代币形式发放。SushiSwap的流动性供应商获得的奖励是协议的原生代币SUSHI，它同时是一种治理代币。与Uniswap（UNI）不同，即使在停止提供流动性之后，SUSHI持有者仍能继续赚取收益。 根据DeFi Pulse的资料，截止2022年3月30日，在中心化交易所排行中，Sushiswap的总资金锁仓量约为16.8亿美元，DeFi应用锁仓量排名第11名。 Quickswap Quickswap是一个layer2的去中心化交易所，与Uniswap、Sushiswap相似，采用AMM的方式。任何人都可以在Quickswap上投入资金，提供流动性，并且再次质押流动性代币来赚取收益。Quickswap的代币QUICK作为治理代币使用，持有者可以提交协议以及想要变更的提案。根据DeFi Pulse的资料，截止2022年3月30日，在中心化交易所排行中，Quickswap的总资金锁仓量约为4.73亿美元，DeFi应用锁仓量排名第22名。 DODO DODO是一个去中心化交易平台，它使用独创的主动做市商（PMM）算法为Web3资产提供高效的链上流动性，让每个人都能轻而易举地发行和交易Web3资产。DODO既自己提供流动性，也聚合其它交易所的流动性。这使得DODO可以提供全网最好的价格。根据DeFi Pulse的资料，截止2022年3月30日，DODO的总资金锁仓量约为4.77千万美元，DeFi应用锁仓量排名第52名。 dForce dForce致力于构建一个集成的和互通的开放式金融协议和货币协议矩阵，包括借贷协议（全球流动性池、生息市场）、资产类协议（多货币稳定币、合成资产等）流动性协议（交易聚合器、自动做市商）三大类。截止2022年3月30日，dForce的总资金锁仓量约为1.54千万美元，DeFi应用锁仓量排名第69名。 Synapse Synapse是由原BNB Chain上的匿名跨链流动性协议Nerve Finance升级更名而来。 Synapse采用跨链多方计算（MPC） 验证器与阈值签名方案，支持资产、智能合约调用等。Synapse将不同区块链连接起来，实现轻松、安全地相互操作；开发者也可以建立真正的跨链应用，包括跨链DEX、借贷平台、保证金系统、衍生品市场、收益汇总器等。 Venus Venus是BNB Chain上的一个合成稳定币驱动的去中心化货币市场系统，为使用者提供加密货币的借贷解决方案，而当中无需任何第三方进行资金保管或中心化实体对协议行使更多控制权。 Venus上的借款人可以在持有加密货币后获得稳定币的即时贷款。这使用户能够获得额外的资金，而无需出售他们的非稳定币数字资产。另一方面，贷款人可以在平台上存入稳定币（以及其他不同的加密货币）以赚取被动收入。Venus的独特之处在于它如何在加密货币的生态系统中推行自己的合成稳定币。该合成稳定币能在不持有它们所挂钩的现实世界资产的情况下（例如通过演算法、生态系统激励方案或使用其他形式的抵押品）而保持稳定的长期价值。 Pancakeswap Pancakeswap是BNB Chain上的去中心化交易所。用户可以通过向平台提供流动性赚取做市收益，通过质押来赚取Cake代币。 Alpaca Alpaca是BNB Chain上提供杠杆农场中最大的借贷协议。Alpaca帮助贷款者赚取收益，并提供借款者以不足额抵押的方式获得杠杆农场仓位贷款，这使得农民挖矿的本金效益极大化，能产生数倍收益。 预言机选择 预言机是将以太坊连接到链外、真实世界信息的数据源，以便您可以在智能合约中查询数据。它允许确定的智能合约对不确定的外部世界作出反应，是智能合约与外部进行数据交互的唯一途径，也是区块链与现实世界进行数据交互的接口。 Chainlink Chainlink是一个去中心化的预言机网络，它弥合了智能合约（如以太坊上的合约）与其外部数据之间的差距。 区块链本身无法以受信任的方式连接到外部应用程序。Chainlink不是一个单一的预言机网络，而是一个由许多并行运行的去中心化预言机网络组成的生态系统，其代币为LINK。 https://chain.link/ 对接的第三方协议 Ethereum BOC合约 第三方协议合约 Vault Balancer3CrvStrategy Balancer Vault DodoUsdtUsdcStrategy DSP、DODOMine DodoDaiUsdtStrategy DSP DODOMine SushiKashiUsdcLinkStrategy KashiPairMediumRiskV1 SushiKashiUsdtXsushiStrategy KashiPairMediumRiskV1 SushiKashiUsdtWethStrategy KashiPairMediumRiskV1 SushiKashiUsdcWethStrategy KashiPairMediumRiskV1 SushiKashiUsdcXsushiStrategy KashiPairMediumRiskV1 ConvexIronBankKrwStrategy Iron Ban iKrw、Curve.fi Factory Plain Pool ibKRW ConvexIronBankJpyStrategy Iron Ban iJPY、Curve.fi Factory Plain Pool ibJPY ConvexIronBankGbpStrategy Iron Ban iGBP、Curve.fi Factory Plain Pool ibGBP ConvexIronBankEurStrategy Iron Ban iEUR、Curve.fi Factory Plain Pool ibEUR ConvexIronBankChfStrategy Iron Ban iCHF、Curve.fi Factory Plain Pool ibCHF ConvexIronBankAudStrategy Iron Ban iUSDT、Curve.fi Factory Plain Pool ibAUD Convex3CrvStrategy Curve.fi ConvexBusdStrategy Curve.fi BUSD Swap ConvexLusdStrategy LUSD3CRV-f ConvexBusdV2Strategy Curve.fi BUSD V2 ConvexYStrategy Curve.fi y Swap ConvexUsdtStrategy Curve.fi USDT Swap ConvexTusdStrategy TUSD3CRV-f ConvexPaxStrategy pax-usdp3 ConvexCompoundStrategy Curve.fi Compound Swap ConvexAaveStrategy Curve.fi aDAI/aUSDC/aUSDT Pool YearnEarnTusdStrategy yearn yTUSD Token GUniUsdcDai100Strategy Gelato Uniswap DAI/USDC LP BNB Chain BOC合约 第三方协议合约 Vault PancakeDaiBusdStrategy PancakeSwap Router v2、PancakeSwap Main Staking Contract PancakeTusdBusdStrategy PancakeSwap Router v2、PancakeSwap Main Staking Contract PancakeUsdcBusdStrategy PancakeSwap Router v2、PancakeSwap Main Staking Contract PancakeUsdcUsdtStrategy PancakeSwap Router v2、PancakeSwap Main Staking Contract PancakeUsdtBusdStrategy PancakeSwap Router v2、PancakeSwap Main Staking Contract AlpacaTusdStrategy ibTUSD AlpacaUsdtStrategy ibUSDT AlpacaBusdStrategy ibBUSD VenusTusdStrategy vTUSD VenusUsdtStrategy VUSDT VenusUsdcStrategy vUSDC VenusDaiStrategy vDAI VenusBusdStrategy vBUSD Belt4BeltStrategy beltPair、MasterBelt DodoBusdUsdcStrategy DODO DodoBusdUsdtStrategy DODO DForceLendBusdStrategy iBUSD DForceLendDaiStrategy iDAI DForceLendUsdcStrategy iUSDC DForceLendUsdtStrategy iUSDT Synapse4UStrategy SwapFlashLoan、Synapse MiniChef Polygon BOC合约 第三方协议合约 Vault Curve3CrvStrategy Curve.fi Aave Pool、Curve.fi Aave Gauge AaveUsdtStrategy Aave Lending Pool V2、Aave Incentives Controller V2 AaveUsdcStrategy Aave Lending Pool V2、Aave Incentives Controller V2 BalancerUsdcUsdtDaiTusdStrategy Balancer Vault QuickswapDaiUsdtStrategy StakingRewards QuickswapUsdcDaiStrategy StakingRewards QuickswapUsdcUsdtStrategy StakingRewards SushiUsdcUsdtStrategy SushiSwap Router、SushiSwap MiniChef SushiUsdcDaiStrategy Synapse4UStrategy SwapFlashLoan、Synapse MiniChef DodoUsdtUsdcStrategy DODO、DODOMine var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/协议算法设计.html":{"url":"docs/协议算法设计.html","title":"协议算法设计","keywords":"","body":"协议算法设计 总体流程说明 存入depositBOC协议支持用户将手中的三大稳定币（USDT、USDC、DAI）以任意组合、任意数量的形式存入，并mint出相应价值的USDi返回给用户。 取出withdraw用户可以随时将USDi通过BOC协议换回三大稳定币，缺省将按照当时Vault中三大稳定币的比例进行返回，也可以指定返回某一种币，并burn相应价值USDi。 Vault接收到稳定币后通过外部预言机queryTokenPrice查询用户转入稳定币的价格。l（预言机返回的价格高于1USD时按1USD算，低于1USD时按预言机价格算）。 根据计算出来的价值，mint/burn铸造/销毁等量价值的USDi。 keeper模块到达doHardWork触发条件，触发doHardWork。 Vault调用聚合兑换模块swapTokenToWants。 聚合兑换模块swapTokens完成兑换。 Vault接收到聚合兑换模块兑换出的目标币种。 Vault按照策略需要的币种将稳定币deposit投入策略中。 策略将稳定币deposit投入到第三方协议。 keeper模块到达harvest触发条件，触发harvest。 Harvester触发各个策略执行harvest。 各策略执行claimRewards收矿。 各策略将矿币transferRewards转移到Harvester。 Harvester通过聚合兑换将矿币sellRewards卖成稳定币。 HarvestersendProfitToVault将稳定币转移到Vault中。 Keeper模块到达rebase触发条件，触发rebase。 Vault调用changeTotalSupply增发USDi。 Vault收取部分收益，转移到国库Treasury。 国库将收益用户buyback回购BOC治理代币。 harvest 每日都会触发harvestTrigger，判断是否达到harvest条件。 超过最大时间间隔 收益*20%>harvest成本 满足以上任意一个条件即可做harvest工作： 执行收矿转移Harvester（对于有产矿的策略而言且达到卖矿阈值）； 上报当前策略资产。 设置参数 ETH BNB Chain POLYGON 定时任务触发周期 每天上午6:00 每天上午6:00 每天上午6:00 触发策略harvest最大时间间隔 （若当前harvest与上次harvest间隔大于此值，必须做harvest） 2.5天 2.5天 2.5天 触发策略harvest的收益成本比例系数X （harvest收益>=成本*X，则可做harvest） 5 5 5 rebase 当若Vault总资产大于USDi总发行量，则说明产生了新的收益，此时将修正USDi相较于美元的价值，增发USDi数量，使得USDi的总价值与Vault资产总价值相符，确保1枚USDi的价值锚定1USD。同时将增发的USDi的20%作为管理费用，转给国库。 资金调配 doHardWork 将第三方协议官方APY、每个策略投资/赎回所需要的gas、兑换滑点限制、资金调配规则等作为调仓算法入参，输出待投资金应投资的策略以及金额。 设置参数 ETH BNB Chain POLYGON 定时任务触发周期 周三周六上午7:00 周三周六上午7:00 周三周六上午7:00 成本收益计算周期X （投资X天的收益>=成本，则doHardWork） 365天 365天 365天 allocation 与doHardWork相比，allocation多做了一步：将低APY策略的资金取出，然后再将第三方协议官方APY、每个策略投资/赎回所需要的gas、兑换滑点限制、资金调配规则等作为调仓算法入参，输出待投资金应投资的策略以及金额。 设置参数 ETH BNB Chain POLYGON 预调仓报告触发时机 每周天上午6:50 每周天上午6:50 每周天上午6:50 定时任务触发周期 每周一上午7:00 每周一上午7:00 每周一上午7:00 成本收益计算周期X （调仓X天的收益>=成本，则可做allocation） 30天 30天 30天 资金调配算法 变量名 变量含义 durationDays 调仓的周期，需要保证在调仓后的一个周期内，调仓后的收益-调仓前的收益-调仓的成本>0 yearDays 365天 asset1 策略的原有资产 apr1 调仓前的策略APR（APY需要转换成APR），调仓算法的APY目前取值为策略链外计算APY的7天平均值 deltaAsset 假设策略调仓的资金变更值 poolAssets1 策略目标投资池子的TVL，作为调仓后APR变化的参数 未调仓前收益 gain1=asset1×apr1×durationDaysyearDays gain1 = \\frac{asset1 \\times apr1 \\times durationDays}{yearDays} gain1=​yearDays​​asset1×apr1×durationDays​​ 变更后的收益 gain2=(asset1+deltaAsset−exchangeLoss)×apr2×durationDaysyearDays gain2 = \\frac{ (asset1+deltaAsset-exchangeLoss) \\times apr2 \\times durationDays}{yearDays} gain2=​yearDays​​(asset1+deltaAsset−exchangeLoss)×apr2×durationDays​​ 变更后的APR apr2=apr1×poolAssets1(poolAssets1+deltaAsset−exchangeLoss) apr2 = \\frac{apr1 \\times poolAssets1}{(poolAssets1+deltaAsset-exchangeLoss)} apr2=​(poolAssets1+deltaAsset−exchangeLoss)​​apr1×poolAssets1​​ 将gain2中的apr2使用上面的等式代入后： gain2=apr1×durationDays/yearDays×(asset1+deltaAsset)×poolAssets1poolAssets1+deltaAsset−exchangeLoss gain2=\\frac{apr1 \\times durationDays/yearDays \\times (asset1+deltaAsset) \\times poolAssets1}{poolAssets1+deltaAsset-exchangeLoss} gain2=​poolAssets1+deltaAsset−exchangeLoss​​apr1×durationDays/yearDays×(asset1+deltaAsset)×poolAssets1​​ 那么单个策略的变更后的收益和变更资产的关系为： deltaGain=gain2−gain1=deltaAsset×(poolAsset1−asset1)×apr1×durationDays(poolAsset1+deltaAsset−exchangeLoss)×yearDays deltaGain = gain2-gain1 = \\frac{deltaAsset \\times (poolAsset1-asset1) \\times apr1 \\times durationDays}{(poolAsset1+deltaAsset-exchangeLoss) \\times yearDays} deltaGain=gain2−gain1=​(poolAsset1+deltaAsset−exchangeLoss)×yearDays​​deltaAsset×(poolAsset1−asset1)×apr1×durationDays​​ 单个策略资金变更成本 变量名 变量含义 withdrawFee 退出资金操作费 lendFee 追加资金操作费 exchangeLoss 兑换币种滑点损失 harvestFee harvest资金费用 profitChangeFee 资金变更成本 withdrawGas withdawGas为withdraw操作消耗的gas，通过预先测试预估得到的 lendGas lendGas为lend操作消耗的gas，通过预先测试预估得到的 exchangeLossRate 兑换滑点滑点 profitChangeFee=withdrawFee+lendFee+exchangeLoss+harvestFee profitChangeFee=withdrawFee+lendFee+exchangeLoss+harvestFee profitChangeFee=withdrawFee+lendFee+exchangeLoss+harvestFee withdrawFee=gasPrice×withdrawGas withdrawFee = gasPrice \\times withdrawGas withdrawFee=gasPrice×withdrawGas lendFee=gasPrice×lendGas lendFee= gasPrice \\times lendGas lendFee=gasPrice×lendGas exchangeLoss=deltaAsset×exchangeLossRate exchangeLoss=deltaAsset \\times exchangeLossRate exchangeLoss=deltaAsset×exchangeLossRate harvestFee=harvestGas×durationDays harvestFee=harvestGas \\times durationDays harvestFee=harvestGas×durationDays 求解所有策略的deltaGain的总和最大值： profitChange=max∑i=1m(deltaGaini−withdrawFeei−lendFeei−exchangeLossi−harvestFeei) profitChange=\\max\\sum_{i=1}^m(deltaGain_i -withdrawFee_i-lendFee_i - exchangeLoss_i-harvestFee_i) profitChange=max​i=1​∑​m​​(deltaGain​i​​−withdrawFee​i​​−lendFee​i​​−exchangeLoss​i​​−harvestFee​i​​) profitChange=max∑i=1m(deltaAsseti×(poolAsseti−asseti)×apri×durationDaysi(poolAsseti+deltaAsseti−exchangeLossi)×yearDaysi−operateFeei−exchangeLossi−harvestFeei) profitChange=\\max\\sum_{i=1}^m(\\frac{deltaAsset_i \\times (poolAsset_i-asset_i) \\times apr_i \\times durationDays_i}{(poolAsset_i+deltaAsset_i-exchangeLoss_i) \\times yearDays_i} - operateFee_i - exchangeLoss_i - harvestFee_i) profitChange=max​i=1​∑​m​​(​(poolAsset​i​​+deltaAsset​i​​−exchangeLoss​i​​)×yearDays​i​​​​deltaAsset​i​​×(poolAsset​i​​−asset​i​​)×apr​i​​×durationDays​i​​​​−operateFee​i​​−exchangeLoss​i​​−harvestFee​i​​) 该公式中，唯一的变量为每个策略的deltaAsset。同时求解还需要受限于 约束条件 同协议策略（多个约束）资金不超过总资金的30% 所有资产变更进出总和为0 边界条件 策略资产不能超过总资产20% 策略资金不能超过目标池子资产的50% 使用python scipy的optimize.minimize求得当前最佳调仓方案。 公共参数配置 设置参数 ETH BNB Chain POLYGON 资金调配计算兑换滑点设置 0.25% 0.25% 0.25% gas 配置 （包括策略存取款gas、兑换gas、harvest成本） 实际gas 实际gas 实际gas 官方APY计算规则 在资金调配时需要传入官方APY作为参考。官方APY的来源渠道有以下几种：vfat.tools、coingecko、zapper、Official APY、apy.vision Fee等。如果官方APY来源渠道未包含该协议策略的APY计算，BOC直接通过复刻协议策略的官方APY计算规则。一般而言，协议策略的官方APY由做市收益与矿币收益组成。以BOC已经对接的ConvexLusdStrategy策略为例，其APY由以下表格内容组成 收益来源 APR 是否复利 计算方式 数据来源 交易手续费 0.0024 否 接口获取 https://www.convexfinance.com/api/curve-apys crv矿币 0.023523458 是 接口获取 https://www.convexfinance.com/api/curve-apys cvx矿币 0.024132445 是 读取合约 按时间发放，一年矿币价格/池子总资产，得到APR 其中“是否复利”是指该收益来源是否可以复利。交易手续费是无法复利的，而矿币收益是可以不断复利，具体APR转换为APY的公示如下： APY=(1+APR)periods−1 APY=(1+APR)^{periods}-1 APY=(1+APR)​periods​​−1 策略实际APY计算规则 策略实际APY是以策略币本位收益进行计算。 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/如何使用BOC.html":{"url":"docs/如何使用BOC.html","title":"如何使用BOC","keywords":"","body":"如何使用BOC 在BOC完成投资需要在用户投资页进行。如果您在首页，请点击“LAUNCH APP”按钮。 连接钱包 您可以通过MetaMask和WalletConnect与BOC进行交互，您需要点击“CONNET WALLET”按钮。 连接钱包后，您可以看见您账户里的USDT余额。 参数设置 跨链桥 我们提供了跨链桥推荐，如果您需要实现加密资产跨链。 切换链 目前BOC已经实现了Ethereum、BNB Chain和Polygon这3条链，如果您需要切换链，可以在“NETWORKS”中完成切换。 投资与赎回 存款 连接钱包成功后，您可以通过选择期望的存款金额或选择“最大”余额存款，点击“DEPOSIT”，完成存款。 取款 连接钱包成功后，您可以通过选择期望的取款份额或选择“最大”份额，点击“WITHDRAW”，完成取款。 取款高级参数 这里有3个高级设置参数 Exchanged：是否开启兑换。BOC中各个策略使用了不同的稳定币种。用户取款时是按照策略APY从低到高进行取款，如果取到了非USDT的策略，将会返回对应策略的稳定币。例如取到YearnLusdStrategy则返回LUSD。如果关闭兑换则会将对应价值的LUSD返回到您账户。如果开启兑换，则需要设置Slippage参数。 Slippage：不同币种兑换滑点。在开启Exchanged后，需要指定您接受的滑点。 Max Loss：取款最大损失。当您指定取款份额后，会显示以当前净值下的总资产，但这并不是您最终能拿到手的资金，在取款过程可能会发生损失，包括兑换滑点损失。假如您此时总资产预估为$1000，选择Max Loss=0.3%，则您拿到手的资金不会少于$997。 Dashboard https://dashboard.bankofchain.io 各个数据说明如下： 链上Vault锁仓量，读取subgraph接口 投资用户数，读取subgraph接口 根据净值计算出来的最近30天的APY 协议资金占比，查询subgraph接口 各策略总资产，读取合约接口 官方APY，每日凌晨定时拉取 币本位weekly profit、weekly APY Vault操作记录，同区块链浏览器展示 BOC subgraph： ETH：https://api.thegraph.com/subgraphs/name/bankofchain/boc-subgraph-eth BNB Chain：https://api.thegraph.com/subgraphs/name/bankofchain/boc-subgraph-bsc POLYGON：https://api.thegraph.com/subgraphs/name/bankofchain/boc-subgraph-matic var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/审计与治理.html":{"url":"docs/审计与治理.html","title":"审计与治理","keywords":"","body":"审计与治理 BOC是一项颠覆性的区块链创新，旨在改变围绕加密投资行业的生态系统，它将成为基金贷款人和投资运营商之间的桥梁，BOC将被应用到更广泛的领域中，从而创造一个真正新的、互联的加密投资世界。 DAO规划 目前，BOC的治理是通过Gnosis多签实现共同管理。后续将会把治理权转移到DAO。DAO计划将根据以下方向进行不断迭代： 使用快照进行链外投票，提议将由链上智能合约执行。 治理代币正在开发中。 代币经济学 BOC代币最大供应量1亿枚。代币TokenHolder将根据持有比例获得BOC管理费用收入。代币锁定后可以参与治理并分享收益。 具体的代币拟按以下4部分发放：团队、投资者、社区以及预留部分。 团队（第一年10%，第二年20%，第三年30%，第四年40%） 20.0% 2000万 技术团队 10.0% 1000万 营销 2.0% 200万 创始人 8% 800万 投资者（第一年10%，第二年20%，第三年30%，第四年40%） 20.0% 2000万 社区 20.0% 2000万 流动性（在Balancer提供美元交易，为期12个月） 5.0% 500万 挖矿（前期投资者收益增强，为期12个月） 15.0% 1500万 预留 40.0% 4000万 团队（未来招募新加入团队） 3.0% 300万 顾问（行业内有影响的重要人士） 2.0% 200万 挖矿（未确定的用户获取计划+新一轮募资） 35.0% 3500万 合计 100.0% 1亿 审计 所有BOC智能合约均由独立实验室（例如SlowMist等）审计 Bug赏金计划 通过与第三方的合作，我们将在社区建立一种方式，以帮助和提高所用智能合约质量。潜在的第三方组织包括premier bug bounty platform和DeFi Project。在这些组织中，安全研究人员审查代码、披露漏洞、获得报酬，并使BOC的智能合约更安全。 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/安全与风险.html":{"url":"docs/安全与风险.html","title":"安全与风险","keywords":"","body":"安全与风险 DeFi生态系统是一种新的金融生态系统。在进入DeFi之前，用户必须了解项目和智能合约风险。本节重点关注与BOC相关的风险。 以下是已实现的安全处理。 为了避免代码漏洞造成损失，协议都应通过审核。 为了减少预言机攻击向量，稳定币的报价必须基于ChainLink而不是协议本身。 为了避免嵌套代币和乐高积木造成的系统连锁风险，BOC生态系统需要长期的安全操作记录。 为了避免市场波动造成的损失，暂未接入通过提供风险服务获得财务回报的协议。 收益稀释风险 来自巨额资金提供的流动性可能会稀释在特定池中投资收益率。 智能合约风险 智能合约由于其复杂性，即使由专业人士审核，也可能会带来风险，并且容易受到黑客攻击和不可预见的事件。 市场风险 借贷协议中的交易对手也存在违约风险，在市场波动的极端情况下，无法及时清算。 交易成本风险 由网络拥塞引发的投资组合自动再平衡将导致较高的交易费用，并影响最终收益率。 预言机风险 预言机是区块链与真实世界之间的桥梁。 预言机充当在链上的API，可以查询以获取信息到的智能合约。 这些信息可以是任何信息，从价格信息到天气预报。 BOC预言机风险分为2个部分。 如果BOC对接的第三方协议策略使用到的预言机被攻击了，协议的收益将不再真实。这会影响BOC基于错误的报价而做出错误的投资决议，进而影响BOC的APY。 如果BOC使用到的预言机被攻击了（目前是用Chainlink），则策略的估值不再准确，将会影响用户存取款。 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/未来发展.html":{"url":"docs/未来发展.html","title":"未来发展","keywords":"","body":"未来发展 算法优化 目前调仓算法只使用了scipy的一种函数minimize，存在优化空间。可以考虑全局优化算法、非凸优化算法等。 支持更多主流区块链 未来将可能支持更多主流的区块链，如Fantom、Avalanche、Solana、Arbitrum等。 支持更多协议策略接入 支持借贷协议 通过引入借贷协议，为BOC提供资金池，后续可接入杠杆协议策略投资。 以Alpha Finance为例，Alpha Finance提供了借贷功能，借贷利率取决于资金利用率。BOC引入借贷协议，为对接协议策略时加杠杆，实时监控做市收益率、矿币收益率和借贷利率的关系，动态调整杠杆倍数。 支持法币入金渠道 支持银行账户出入金； 支持信用卡出入金； 支持支付软件出入金； 支持非稳定币理财 支持ETH耕种理财 支持非主流币耕种理财 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/FAQ.html":{"url":"docs/FAQ.html","title":"FAQ","keywords":"","body":"FAQ BOC和其他DeFi理财产品有什么不同 BOC旨在成为DeFi的无风险协议。请参考为何BOC与众不同 为什么叫BOC BOC是一种新的投资算法，使用stablecoin和其他可用的投资工具实现无风险设计，与实体银行一样，随着周围环境的变化保持稳定 问：BOC的用户界面会得到改善吗 回答：是的！用户界面只是最简单可行的产品，我们将在发布前更新用户界面 问题：我想帮忙，我能做什么 答：最好从我们的客户服务页面开始 var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "},"docs/参考文献.html":{"url":"docs/参考文献.html","title":"参考文献","keywords":"","body":"参考文献 词汇表Glossary 去中心化金融（Defi） 去中心化金融（Decentralized finance，俗称DeFi）是一种创建于区块链上的金融，它不依赖券商、交易所或银行等金融机构提供金融工具，而是利用区块链上的智能合约（例如以太坊）进行金融活动。DeFi平台允许人们向他人借出或借入资金，交易加密货币，并在类似储蓄的账户中获得利息。 自动做市商（AMM） 自动做市商（AMM）是一种自主交易机制，无需集中交易和相关做市技术。它鼓励用户成为流动性提供者，以换取一部分交易费用和免费代币。 借贷协议（lending Protocol） 借贷协议（lending Protocol）由借方（lenders）和贷方（borrowers）组成的平台。一方面，它允许贷方从平台借贷数字加密货币并支付利息，另 一方面它允许储户向平台存入数字加密货币以赚取利息。与银行的存款 账户相比Defi借贷协议通常可以提供高得多的利息。 收益聚合器（Yield Aggregators） 收益聚合器（Yield Aggregators），是一个支持多种DeFi协议的聚合平台，它可以在各个提供流动性挖矿的DeFi协议之间自动进行移仓，帮助用户获得更高的收益。 机枪池（Vaults） 机枪池是一种复杂的投资策略，它结合了借贷、质押、交易等，使利润最大化。 Harvest Finance Harvest Finance是Ethereum、BNB Chain和Polygon上的收益聚合平台，它可以使用户的资产在DeFi生态系统中获得最大收益。 定时器（Keeper） BOC项目自己开发的中心化定时器，用于链上任务的定时触发（收割、调仓、增量资金复投等）。 年收益率（APY） 年收益率（Annual percentage yield） 是衡量投资账户在一年中赚多少钱的一种方式，是一种衡量利息随时间上涨的方法。基本计算公式是 APY=(1+APR)periods−1 APY=(1+APR)^{periods}-1 APY=(1+APR)​periods​​−1 缩略词表（Abbreviate） 缩略词 描述 AMM 自动做市商（Automated market makers） API 应用程序编程接口（Application Programming Interface） APY 年收益率(Annual percentage yield) BNB BNB Chain区块链代币 DAPP / dApp 去中心化应用（Decentralized Application） Defi 去中心化金融（Decentralized finance） DEX 去中心化交易所（Decentralized Exchange） EVM 以太坊虚拟机（Ethereum Virtual Machine） FX 外汇（Foreign Exchange） KYC 充分了解你的客户（Know user's Customer) LP 流动性提供者（Liquidity Provider） PoS 权益证明（Proof of Stake） PoSA 权益权威证明 PoW 工作量证明（Proof of Work） Tx 交易（Transaction） var className='atoc'; © BOC Technical Team all right reserved，powered by Gitbookupdate time： 2022-03-31 11:59:55 "}}